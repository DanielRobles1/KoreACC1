<!-- usuarios.component.html -->
<div class="layout" [class.is-collapsed]="!sidebarOpen">
  <app-sidebar
    class="sidebar"
    [open]="sidebarOpen"
    (openChange)="onSidebarToggle($event)">
  </app-sidebar>

  <div class="content">
    <app-crud-panel
      [title]="title"
      [tabs]="tabs"
      [activeTabId]="activeTabId"
      (tabChange)="onTabChange($event)"
      [primaryActionLabel]="'Nuevo Usuario'"
      (primaryAction)="onPrimary()"
      [columns]="columns"
      [data]="rows"
      [actions]="actions"
      (action)="onRowAction($event)"
      [page]="page"
      [totalPages]="totalPages">
    </app-crud-panel>
  </div>
</div>

<app-modal
  [open]="modalOpen"
  [title]="modalTitle"
  [size]="modalSize"
  (closed)="closeModal()
  "
  (canceled)="cancelModal()"
  (confirmed)="userFormRef.submit()"
>

  <app-user-form
    #userFormRef
    [value]="editing"
    [roles]="['Administrador','Contador','Auditor','Invitado']"
    [readonlyEmail]="!!editing"
    (submitted)="upsertUser($event)"
    (canceled)="cancelModal()"
  ></app-user-form>
</app-modal>

<!-- MODAL DE CONFIRMACIÃ“-->
<app-modal
  [open]="confirmOpen"
  [title]="confirmTitle"
  size="sm"
  (closed)="closeConfirm()"
  (canceled)="cancelConfirm()"
  (confirmed)="confirmProceed()"
>
  <p style="margin:0 0 .5rem 0;">{{ confirmMessage }}</p>
</app-modal>